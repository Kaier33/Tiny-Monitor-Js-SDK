var MonitJsSdk=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=function(e){return e&&e.Math==Math&&e},i=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a={exports:{}},u=i,c=Object.defineProperty,s=function(e,t){try{c(u,e,{value:t,configurable:!0,writable:!0})}catch(r){u[e]=t}return t},l=s,f="__core-js_shared__",p=i[f]||l(f,{}),h=p;(a.exports=function(e,t){return h[e]||(h[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.1",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var d,g,y=Function.prototype,v=y.bind,m=y.call,b=v&&v.bind(m),E=v?function(e){return e&&b(m,e)}:function(e){return e&&function(){return m.apply(e,arguments)}},O=i.TypeError,R=function(e){if(null==e)throw O("Can't call method on "+e);return e},S=R,w=i.Object,I=function(e){return w(S(e))},_=I,x=E({}.hasOwnProperty),T=Object.hasOwn||function(e,t){return x(_(e),t)},j=E,k=0,P=Math.random(),A=j(1..toString),C=function(e){return"Symbol("+(void 0===e?"":e)+")_"+A(++k+P,36)},F=function(e){return"function"==typeof e},D=i,L=F,M=function(e){return L(e)?e:void 0},N=function(e,t){return arguments.length<2?M(D[e]):D[e]&&D[e][t]},H=i,B=N("navigator","userAgent")||"",q=H.process,U=H.Deno,V=q&&q.versions||U&&U.version,z=V&&V.v8;z&&(g=(d=z.split("."))[0]>0&&d[0]<4?1:+(d[0]+d[1])),!g&&B&&(!(d=B.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=B.match(/Chrome\/(\d+)/))&&(g=+d[1]);var G=g,W=function(e){try{return!!e()}catch(e){return!0}},X=G,J=W,$=!!Object.getOwnPropertySymbols&&!J((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&X&&X<41})),K=$&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Y=i,Q=a.exports,Z=T,ee=C,te=$,re=K,ne=Q("wks"),oe=Y.Symbol,ie=oe&&oe.for,ae=re?oe:oe&&oe.withoutSetter||ee,ue=function(e){if(!Z(ne,e)||!te&&"string"!=typeof ne[e]){var t="Symbol."+e;te&&Z(oe,e)?ne[e]=oe[e]:ne[e]=re&&ie?ie(t):ae(t)}return ne[e]},ce={};ce[ue("toStringTag")]="z";var se="[object z]"===String(ce),le={exports:{}},fe=!W((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pe={},he=F,de=function(e){return"object"==typeof e?null!==e:he(e)},ge=de,ye=i.document,ve=ge(ye)&&ge(ye.createElement),me=function(e){return ve?ye.createElement(e):{}},be=me,Ee=!fe&&!W((function(){return 7!=Object.defineProperty(be("div"),"a",{get:function(){return 7}}).a})),Oe=i,Re=de,Se=Oe.String,we=Oe.TypeError,Ie=function(e){if(Re(e))return e;throw we(Se(e)+" is not an object")},_e=Function.prototype.call,xe=_e.bind?_e.bind(_e):function(){return _e.apply(_e,arguments)},Te=E({}.isPrototypeOf),je=N,ke=F,Pe=Te,Ae=K,Ce=i.Object,Fe=Ae?function(e){return"symbol"==typeof e}:function(e){var t=je("Symbol");return ke(t)&&Pe(t.prototype,Ce(e))},De=i.String,Le=F,Me=function(e){try{return De(e)}catch(e){return"Object"}},Ne=i.TypeError,He=function(e){if(Le(e))return e;throw Ne(Me(e)+" is not a function")},Be=xe,qe=F,Ue=de,Ve=i.TypeError,ze=xe,Ge=de,We=Fe,Xe=function(e,t){var r=e[t];return null==r?void 0:He(r)},Je=function(e,t){var r,n;if("string"===t&&qe(r=e.toString)&&!Ue(n=Be(r,e)))return n;if(qe(r=e.valueOf)&&!Ue(n=Be(r,e)))return n;if("string"!==t&&qe(r=e.toString)&&!Ue(n=Be(r,e)))return n;throw Ve("Can't convert object to primitive value")},$e=ue,Ke=i.TypeError,Ye=$e("toPrimitive"),Qe=function(e,t){if(!Ge(e)||We(e))return e;var r,n=Xe(e,Ye);if(n){if(void 0===t&&(t="default"),r=ze(n,e,t),!Ge(r)||We(r))return r;throw Ke("Can't convert object to primitive value")}return void 0===t&&(t="number"),Je(e,t)},Ze=Fe,et=function(e){var t=Qe(e,"string");return Ze(t)?t:t+""},tt=fe,rt=Ee,nt=Ie,ot=et,it=i.TypeError,at=Object.defineProperty;pe.f=tt?at:function(e,t,r){if(nt(e),t=ot(t),nt(r),rt)try{return at(e,t,r)}catch(e){}if("get"in r||"set"in r)throw it("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var ut=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},ct=pe,st=ut,lt=fe?function(e,t,r){return ct.f(e,t,st(1,r))}:function(e,t,r){return e[t]=r,e},ft=F,pt=p,ht=E(Function.toString);ft(pt.inspectSource)||(pt.inspectSource=function(e){return ht(e)});var dt,gt,yt,vt=pt.inspectSource,mt=F,bt=vt,Et=i.WeakMap,Ot=mt(Et)&&/native code/.test(bt(Et)),Rt=a.exports,St=C,wt=Rt("keys"),It=function(e){return wt[e]||(wt[e]=St(e))},_t={},xt=Ot,Tt=i,jt=E,kt=de,Pt=lt,At=T,Ct=p,Ft=It,Dt=_t,Lt="Object already initialized",Mt=Tt.TypeError,Nt=Tt.WeakMap;if(xt||Ct.state){var Ht=Ct.state||(Ct.state=new Nt),Bt=jt(Ht.get),qt=jt(Ht.has),Ut=jt(Ht.set);dt=function(e,t){if(qt(Ht,e))throw new Mt(Lt);return t.facade=e,Ut(Ht,e,t),t},gt=function(e){return Bt(Ht,e)||{}},yt=function(e){return qt(Ht,e)}}else{var Vt=Ft("state");Dt[Vt]=!0,dt=function(e,t){if(At(e,Vt))throw new Mt(Lt);return t.facade=e,Pt(e,Vt,t),t},gt=function(e){return At(e,Vt)?e[Vt]:{}},yt=function(e){return At(e,Vt)}}var zt={set:dt,get:gt,has:yt,enforce:function(e){return yt(e)?gt(e):dt(e,{})},getterFor:function(e){return function(t){var r;if(!kt(t)||(r=gt(t)).type!==e)throw Mt("Incompatible receiver, "+e+" required");return r}}},Gt=fe,Wt=T,Xt=Function.prototype,Jt=Gt&&Object.getOwnPropertyDescriptor,$t=Wt(Xt,"name"),Kt={EXISTS:$t,PROPER:$t&&"something"===function(){}.name,CONFIGURABLE:$t&&(!Gt||Gt&&Jt(Xt,"name").configurable)},Yt=i,Qt=F,Zt=T,er=lt,tr=s,rr=vt,nr=Kt.CONFIGURABLE,or=zt.get,ir=zt.enforce,ar=String(String).split("String");(le.exports=function(e,t,r,n){var o,i=!!n&&!!n.unsafe,a=!!n&&!!n.enumerable,u=!!n&&!!n.noTargetGet,c=n&&void 0!==n.name?n.name:t;Qt(r)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Zt(r,"name")||nr&&r.name!==c)&&er(r,"name",c),(o=ir(r)).source||(o.source=ar.join("string"==typeof c?c:""))),e!==Yt?(i?!u&&e[t]&&(a=!0):delete e[t],a?e[t]=r:er(e,t,r)):a?e[t]=r:tr(t,r)})(Function.prototype,"toString",(function(){return Qt(this)&&or(this).source||rr(this)}));var ur=E,cr=ur({}.toString),sr=ur("".slice),lr=function(e){return sr(cr(e),8,-1)},fr=i,pr=se,hr=F,dr=lr,gr=ue("toStringTag"),yr=fr.Object,vr="Arguments"==dr(function(){return arguments}()),mr=pr?dr:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=yr(e),gr))?r:vr?dr(t):"Object"==(n=dr(t))&&hr(t.callee)?"Arguments":n},br=mr,Er=se?{}.toString:function(){return"[object "+br(this)+"]"},Or=se,Rr=le.exports,Sr=Er;Or||Rr(Object.prototype,"toString",Sr,{unsafe:!0});var wr={},Ir={},_r={}.propertyIsEnumerable,xr=Object.getOwnPropertyDescriptor,Tr=xr&&!_r.call({1:2},1);Ir.f=Tr?function(e){var t=xr(this,e);return!!t&&t.enumerable}:_r;var jr=E,kr=W,Pr=lr,Ar=i.Object,Cr=jr("".split),Fr=kr((function(){return!Ar("z").propertyIsEnumerable(0)}))?function(e){return"String"==Pr(e)?Cr(e,""):Ar(e)}:Ar,Dr=R,Lr=function(e){return Fr(Dr(e))},Mr=fe,Nr=xe,Hr=Ir,Br=ut,qr=Lr,Ur=et,Vr=T,zr=Ee,Gr=Object.getOwnPropertyDescriptor;wr.f=Mr?Gr:function(e,t){if(e=qr(e),t=Ur(t),zr)try{return Gr(e,t)}catch(e){}if(Vr(e,t))return Br(!Nr(Hr.f,e,t),e[t])};var Wr={},Xr=Math.ceil,Jr=Math.floor,$r=function(e){var t=+e;return t!=t||0===t?0:(t>0?Jr:Xr)(t)},Kr=$r,Yr=Math.max,Qr=Math.min,Zr=function(e,t){var r=Kr(e);return r<0?Yr(r+t,0):Qr(r,t)},en=$r,tn=Math.min,rn=function(e){return e>0?tn(en(e),9007199254740991):0},nn=function(e){return rn(e.length)},on=Lr,an=Zr,un=nn,cn=function(e){return function(t,r,n){var o,i=on(t),a=un(i),u=an(n,a);if(e&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((e||u in i)&&i[u]===r)return e||u||0;return!e&&-1}},sn={includes:cn(!0),indexOf:cn(!1)},ln=T,fn=Lr,pn=sn.indexOf,hn=_t,dn=E([].push),gn=function(e,t){var r,n=fn(e),o=0,i=[];for(r in n)!ln(hn,r)&&ln(n,r)&&dn(i,r);for(;t.length>o;)ln(n,r=t[o++])&&(~pn(i,r)||dn(i,r));return i},yn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],vn=gn,mn=yn.concat("length","prototype");Wr.f=Object.getOwnPropertyNames||function(e){return vn(e,mn)};var bn={};bn.f=Object.getOwnPropertySymbols;var En,On=N,Rn=Wr,Sn=bn,wn=Ie,In=E([].concat),_n=On("Reflect","ownKeys")||function(e){var t=Rn.f(wn(e)),r=Sn.f;return r?In(t,r(e)):t},xn=T,Tn=_n,jn=wr,kn=pe,Pn=W,An=F,Cn=/#|\.prototype\./,Fn=function(e,t){var r=Ln[Dn(e)];return r==Nn||r!=Mn&&(An(t)?Pn(t):!!t)},Dn=Fn.normalize=function(e){return String(e).replace(Cn,".").toLowerCase()},Ln=Fn.data={},Mn=Fn.NATIVE="N",Nn=Fn.POLYFILL="P",Hn=Fn,Bn=i,qn=wr.f,Un=lt,Vn=le.exports,zn=s,Gn=function(e,t,r){for(var n=Tn(t),o=kn.f,i=jn.f,a=0;a<n.length;a++){var u=n[a];xn(e,u)||r&&xn(r,u)||o(e,u,i(t,u))}},Wn=Hn,Xn=function(e,t){var r,n,o,i,a,u=e.target,c=e.global,s=e.stat;if(r=c?Bn:s?Bn[u]||zn(u,{}):(Bn[u]||{}).prototype)for(n in t){if(i=t[n],o=e.noTargetGet?(a=qn(r,n))&&a.value:r[n],!Wn(c?n:u+(s?".":"#")+n,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;Gn(i,o)}(e.sham||o&&o.sham)&&Un(i,"sham",!0),Vn(r,n,i,e)}},Jn=gn,$n=yn,Kn=Object.keys||function(e){return Jn(e,$n)},Yn=pe,Qn=Ie,Zn=Lr,eo=Kn,to=fe?Object.defineProperties:function(e,t){Qn(e);for(var r,n=Zn(t),o=eo(t),i=o.length,a=0;i>a;)Yn.f(e,r=o[a++],n[r]);return e},ro=N("document","documentElement"),no=Ie,oo=to,io=yn,ao=_t,uo=ro,co=me,so=It("IE_PROTO"),lo=function(){},fo=function(e){return"<script>"+e+"</"+"script>"},po=function(e){e.write(fo("")),e.close();var t=e.parentWindow.Object;return e=null,t},ho=function(){try{En=new ActiveXObject("htmlfile")}catch(e){}var e,t;ho="undefined"!=typeof document?document.domain&&En?po(En):((t=co("iframe")).style.display="none",uo.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(fo("document.F=Object")),e.close(),e.F):po(En);for(var r=io.length;r--;)delete ho.prototype[io[r]];return ho()};ao[so]=!0;var go=Object.create||function(e,t){var r;return null!==e?(lo.prototype=no(e),r=new lo,lo.prototype=null,r[so]=e):r=ho(),void 0===t?r:oo(r,t)},yo=go,vo=pe,mo=ue("unscopables"),bo=Array.prototype;null==bo[mo]&&vo.f(bo,mo,{configurable:!0,value:yo(null)});var Eo=sn.includes,Oo=function(e){bo[mo][e]=!0};Xn({target:"Array",proto:!0},{includes:function(e){return Eo(this,e,arguments.length>1?arguments[1]:void 0)}}),Oo("includes");var Ro=de,So=lr,wo=ue("match"),Io=function(e){var t;return Ro(e)&&(void 0!==(t=e[wo])?!!t:"RegExp"==So(e))},_o=i.TypeError,xo=mr,To=i.String,jo=function(e){if("Symbol"===xo(e))throw TypeError("Cannot convert a Symbol value to a string");return To(e)},ko=ue("match"),Po=Xn,Ao=function(e){if(Io(e))throw _o("The method doesn't accept regular expressions");return e},Co=R,Fo=jo,Do=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[ko]=!1,"/./"[e](t)}catch(e){}}return!1},Lo=E("".indexOf);Po({target:"String",proto:!0,forced:!Do("includes")},{includes:function(e){return!!~Lo(Fo(Co(this)),Fo(Ao(e)),arguments.length>1?arguments[1]:void 0)}});var Mo=lr,No=Array.isArray||function(e){return"Array"==Mo(e)},Ho=et,Bo=pe,qo=ut,Uo=function(e,t,r){var n=Ho(t);n in e?Bo.f(e,n,qo(0,r)):e[n]=r},Vo=E,zo=W,Go=F,Wo=mr,Xo=vt,Jo=function(){},$o=[],Ko=N("Reflect","construct"),Yo=/^\s*(?:class|function)\b/,Qo=Vo(Yo.exec),Zo=!Yo.exec(Jo),ei=function(e){if(!Go(e))return!1;try{return Ko(Jo,$o,e),!0}catch(e){return!1}},ti=function(e){if(!Go(e))return!1;switch(Wo(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Zo||!!Qo(Yo,Xo(e))}catch(e){return!0}};ti.sham=!0;var ri=!Ko||zo((function(){var e;return ei(ei.call)||!ei(Object)||!ei((function(){e=!0}))||e}))?ti:ei,ni=i,oi=No,ii=ri,ai=de,ui=ue("species"),ci=ni.Array,si=function(e){var t;return oi(e)&&(t=e.constructor,(ii(t)&&(t===ci||oi(t.prototype))||ai(t)&&null===(t=t[ui]))&&(t=void 0)),void 0===t?ci:t},li=W,fi=G,pi=ue("species"),hi=function(e){return fi>=51||!li((function(){var t=[];return(t.constructor={})[pi]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},di=Xn,gi=i,yi=W,vi=No,mi=de,bi=I,Ei=nn,Oi=Uo,Ri=function(e,t){return new(si(e))(0===t?0:t)},Si=hi,wi=G,Ii=ue("isConcatSpreadable"),_i=9007199254740991,xi="Maximum allowed index exceeded",Ti=gi.TypeError,ji=wi>=51||!yi((function(){var e=[];return e[Ii]=!1,e.concat()[0]!==e})),ki=Si("concat"),Pi=function(e){if(!mi(e))return!1;var t=e[Ii];return void 0!==t?!!t:vi(e)};di({target:"Array",proto:!0,forced:!ji||!ki},{concat:function(e){var t,r,n,o,i,a=bi(this),u=Ri(a,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(Pi(i=-1===t?a:arguments[t])){if(c+(o=Ei(i))>_i)throw Ti(xi);for(r=0;r<o;r++,c++)r in i&&Oi(u,c,i[r])}else{if(c>=_i)throw Ti(xi);Oi(u,c++,i)}return u.length=c,u}});var Ai=Ie,Ci=function(){var e=Ai(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Fi=E,Di=Kt.PROPER,Li=le.exports,Mi=Ie,Ni=Te,Hi=jo,Bi=W,qi=Ci,Ui="toString",Vi=RegExp.prototype,zi=Vi.toString,Gi=Fi(qi),Wi=Bi((function(){return"/a/b"!=zi.call({source:"a",flags:"b"})})),Xi=Di&&zi.name!=Ui;(Wi||Xi)&&Li(RegExp.prototype,Ui,(function(){var e=Mi(this),t=Hi(e.source),r=e.flags;return"/"+t+"/"+Hi(void 0===r&&Ni(Vi,e)&&!("flags"in Vi)?Gi(e):r)}),{unsafe:!0});var Ji,$i,Ki=W,Yi=i.RegExp,Qi=Ki((function(){var e=Yi("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Zi=Qi||Ki((function(){return!Yi("a","y").sticky})),ea={BROKEN_CARET:Qi||Ki((function(){var e=Yi("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:Zi,UNSUPPORTED_Y:Qi},ta=W,ra=i.RegExp,na=ta((function(){var e=ra(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),oa=W,ia=i.RegExp,aa=oa((function(){var e=ia("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),ua=xe,ca=E,sa=jo,la=Ci,fa=ea,pa=a.exports,ha=go,da=zt.get,ga=na,ya=aa,va=pa("native-string-replace",String.prototype.replace),ma=RegExp.prototype.exec,ba=ma,Ea=ca("".charAt),Oa=ca("".indexOf),Ra=ca("".replace),Sa=ca("".slice),wa=($i=/b*/g,ua(ma,Ji=/a/,"a"),ua(ma,$i,"a"),0!==Ji.lastIndex||0!==$i.lastIndex),Ia=fa.BROKEN_CARET,_a=void 0!==/()??/.exec("")[1];(wa||_a||Ia||ga||ya)&&(ba=function(e){var t,r,n,o,i,a,u,c=this,s=da(c),l=sa(e),f=s.raw;if(f)return f.lastIndex=c.lastIndex,t=ua(ba,f,l),c.lastIndex=f.lastIndex,t;var p=s.groups,h=Ia&&c.sticky,d=ua(la,c),g=c.source,y=0,v=l;if(h&&(d=Ra(d,"y",""),-1===Oa(d,"g")&&(d+="g"),v=Sa(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==Ea(l,c.lastIndex-1))&&(g="(?: "+g+")",v=" "+v,y++),r=new RegExp("^(?:"+g+")",d)),_a&&(r=new RegExp("^"+g+"$(?!\\s)",d)),wa&&(n=c.lastIndex),o=ua(ma,h?r:c,v),h?o?(o.input=Sa(o.input,y),o[0]=Sa(o[0],y),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:wa&&o&&(c.lastIndex=c.global?o.index+o[0].length:n),_a&&o&&o.length>1&&ua(va,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&p)for(o.groups=a=ha(null),i=0;i<p.length;i++)a[(u=p[i])[0]]=o[u[1]];return o});Xn({target:"RegExp",proto:!0,forced:/./.exec!==ba},{exec:ba});var xa=E([].slice),Ta=Xn,ja=i,ka=No,Pa=ri,Aa=de,Ca=Zr,Fa=nn,Da=Lr,La=Uo,Ma=ue,Na=xa,Ha=hi("slice"),Ba=Ma("species"),qa=ja.Array,Ua=Math.max;function Va(e){var t,r=null===(t=e)?"NULL":void 0===t?"UNDEFINED":"string"==typeof t||t instanceof String?"".concat(t):t.toString();if(!r)return 0;var n,o=0;if(0===r.length)return o;for(n=0;n<r.length;n++)o=(o<<5)-o+r.charCodeAt(n),o|=0;return o<0?"n"+Math.abs(o):"p"+o}function za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(navigator.sendBeacon&&"function"==typeof navigator.sendBeacon)navigator.sendBeacon(e,JSON.stringify(t));else{var r=new XMLHttpRequest;r.open("POST",e),r.setRequestHeader("content-type","application/json"),r.withCredentials=!0,r.send(JSON.stringify(t))}}catch(e){console.log("post err")}}Ta({target:"Array",proto:!0,forced:!Ha},{slice:function(e,t){var r,n,o,i=Da(this),a=Fa(i),u=Ca(e,a),c=Ca(void 0===t?a:t,a);if(ka(i)&&(r=i.constructor,(Pa(r)&&(r===qa||ka(r.prototype))||Aa(r)&&null===(r=r[Ba]))&&(r=void 0),r===qa||void 0===r))return Na(i,u,c);for(n=new(void 0===r?qa:r)(Ua(c-u,0)),o=0;u<c;u++,o++)u in i&&La(n,o,i[u]);return n.length=o,n}});var Ga="vue_error",Wa="unhandledrejection",Xa="script_error",Ja="resource_error",$a="request_error",Ka=function(){function t(r){var n=r.dsn,o=r.key,i=r.Vue,a=r.ignoreErrType;e(this,t),this.userId="",this.dsn=n,this.key=o,this.Vue=i,this.ignoreErrType=a||null,this._ERROR_STORE=[],this._DEVICE_INFO={screen_info:{availHeight:screen.availHeight||"",availWidth:screen.availWidth||"",height:screen.height,width:screen.width},language:navigator.language,userAgent:navigator.userAgent.toLocaleLowerCase()},this.initialize()}return r(t,[{key:"initialize",value:function(){this.polyfillRequestIdleCallback(),this.generateUserId(),this.proxyErrorStore(),this.collectCatchErrorFn()}},{key:"polyfillRequestIdleCallback",value:function(){window.requestIdleCallback=window.requestIdleCallback||function(e){return setTimeout((function(){e()}),1)}}},{key:"proxyErrorStore",value:function(){var e=Array.prototype,t=Object.create(e);["push","clear"].forEach((function(r){t[r]=function(){"push"===r?e[r].apply(this,arguments):"clear"===r&&(this.length=0)}})),this._ERROR_STORE.__proto__=t}},{key:"collectCatchErrorFn",value:function(){this.listenErrorHandle(),!this.shouldBeIgnoreErrType(Wa)&&this.unhandledrejectionHandle(),!this.shouldBeIgnoreErrType(Ga)&&this.vueErrorHandle(),!this.shouldBeIgnoreErrType($a)&&this.overwriteXHR()}},{key:"shouldBeIgnoreErrType",value:function(e){var t=function(e,t){return Object.prototype.toString.call(e).slice(8,-1)===t}(this.ignoreErrType,"Array");return!!t&&this.ignoreErrType.includes(e)}},{key:"generateUserId",value:function(){localStorage.getItem("___monitor-js-uid___")?this.userId=localStorage.getItem("___monitor-js-uid___"):(this.userId=Va(String((new Date).getTime())+navigator.userAgent),localStorage.setItem("___monitor-js-uid___",this.userId))}},{key:"manualPost",value:function(){var e=this;e._ERROR_STORE.length&&(za(e.dsn+"/post",e._ERROR_STORE),e._ERROR_STORE.clear())}},{key:"clearErrorStore",value:function(){this._ERROR_STORE.clear()}},{key:"reportError",value:function(e){var t=this;this.dsn&&this.key&&window.requestIdleCallback((function(){za(t.dsn+"/report-err",e)}))}},{key:"generateReportData",value:function(e){var t=e.type,r=e.errorInfo;if(t||r)return{type:t,errorInfo:r,url:location.href,userId:this.userId,key:this.key,deviceInfo:this._DEVICE_INFO,timestamp:(new Date).getTime(),errorId:Va(t+JSON.stringify(r)+location.href)}}},{key:"unhandledrejectionHandle",value:function(){var e=this;window.addEventListener("unhandledrejection",(function(t){console.error("promise异常::",t.reason);var r=e.generateReportData({type:"unhandledrejection",errorInfo:{error:t.reason}});return e.reportError(r),e._ERROR_STORE.push(r),!0}))}},{key:"listenErrorHandle",value:function(){var e=this;window.addEventListener("error",(function(t){if(console.error("异常::",t),t instanceof ErrorEvent){if(e.shouldBeIgnoreErrType(Xa))return;var r=e.generateReportData({type:Xa,errorInfo:{colno:t.colno,lineno:t.lineno,message:t.message,filename:t.filename}});e.reportError(r),e._ERROR_STORE.push(r)}else if(t.target.localName){if(e.shouldBeIgnoreErrType(Ja))return;var n=e.generateReportData({type:Ja,errorInfo:{error:t.target.outerHTML}});e.reportError(n),e._ERROR_STORE.push(n)}}),!0)}},{key:"vueErrorHandle",value:function(){var e=this;this.Vue&&this.Vue.config&&(this.Vue.config.errorHandler=function(t,r,n){console.error("Vue_err::",t);var o="";r.$route&&(o=r.$route.path);var i=e.generateReportData({type:Ga,errorInfo:{vue_stack_err:t.stack,vue_info:"".concat(t.toString(),"-----\x3e").concat(n),route:o}});e.reportError(i),e._ERROR_STORE.push(i)})}},{key:"overwriteXHR",value:function(){if(!(!1 in window)){var e=this,t=window.XMLHttpRequest.prototype,r=t.open;t.open=function(){this._httpInfo={method:arguments[0],startTime:Date.now()},r.apply(this,arguments)};var n=t.send,o=this.replaceOriginalFn(n,"loadend",(function(){if(4===this.readyState&&this.status>=400){console.log("接口响应粗错了",this);var t=/'application\/json'/.test(this.getResponseHeader("content-type")),r=e.generateReportData({type:$a,errorInfo:{status:this.status,response:t?JSON.parse(this.response):this.response,responseURL:this.responseURL,requestMethod:this._httpInfo.method,spendTime:Date.now()-this._httpInfo.startTime}});e.reportError(r),e._ERROR_STORE.push(r)}}));t.send=o}}},{key:"replaceOriginalFn",value:function(e,t,r){return function(){this.addEventListener(t,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];e.apply(this,o)}}}]),t}();return function(){function t(){e(this,t),this.monitorInstance=null}return r(t,null,[{key:"init",value:function(e){var t=e.dsn,r=e.key,n=e.Vue,o=e.ignoreErrType;t&&r&&(this.monitorInstance=new Ka({dsn:t,key:r,Vue:n,ignoreErrType:o}))}},{key:"instance",value:function(){return this.monitorInstance}},{key:"errorStore",value:function(){return this.monitorInstance._ERROR_STORE}},{key:"manualPost",value:function(){this.monitorInstance.manualPost()}},{key:"clearErrorStore",value:function(){this.monitorInstance.clearErrorStore()}}]),t}()}();
