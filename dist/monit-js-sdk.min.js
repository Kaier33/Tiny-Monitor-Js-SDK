var MonitJsSdk=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=function(t){return t&&t.Math==Math&&t},i=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a={exports:{}},u=i,c=Object.defineProperty,s=function(t,e){try{c(u,t,{value:e,configurable:!0,writable:!0})}catch(r){u[t]=e}return e},l=s,f="__core-js_shared__",p=i[f]||l(f,{}),d=p;(a.exports=function(t,e){return d[t]||(d[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.20.1",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var h,v,g=Function.prototype,y=g.bind,m=g.call,b=y&&y.bind(m),E=y?function(t){return t&&b(m,t)}:function(t){return t&&function(){return m.apply(t,arguments)}},O=i.TypeError,R=function(t){if(null==t)throw O("Can't call method on "+t);return t},S=R,w=i.Object,_=function(t){return w(S(t))},I=_,x=E({}.hasOwnProperty),j=Object.hasOwn||function(t,e){return x(I(t),e)},T=E,k=0,P=Math.random(),C=T(1..toString),A=function(t){return"Symbol("+(void 0===t?"":t)+")_"+C(++k+P,36)},F=function(t){return"function"==typeof t},D=i,L=F,N=function(t){return L(t)?t:void 0},M=function(t,e){return arguments.length<2?N(D[t]):D[t]&&D[t][e]},H=i,q=M("navigator","userAgent")||"",U=H.process,V=H.Deno,z=U&&U.versions||V&&V.version,B=z&&z.v8;B&&(v=(h=B.split("."))[0]>0&&h[0]<4?1:+(h[0]+h[1])),!v&&q&&(!(h=q.match(/Edge\/(\d+)/))||h[1]>=74)&&(h=q.match(/Chrome\/(\d+)/))&&(v=+h[1]);var G=v,W=function(t){try{return!!t()}catch(t){return!0}},X=G,J=W,$=!!Object.getOwnPropertySymbols&&!J((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&X&&X<41})),K=$&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Y=i,Q=a.exports,Z=j,tt=A,et=$,rt=K,nt=Q("wks"),ot=Y.Symbol,it=ot&&ot.for,at=rt?ot:ot&&ot.withoutSetter||tt,ut=function(t){if(!Z(nt,t)||!et&&"string"!=typeof nt[t]){var e="Symbol."+t;et&&Z(ot,t)?nt[t]=ot[t]:nt[t]=rt&&it?it(e):at(e)}return nt[t]},ct={};ct[ut("toStringTag")]="z";var st="[object z]"===String(ct),lt={exports:{}},ft=!W((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pt={},dt=F,ht=function(t){return"object"==typeof t?null!==t:dt(t)},vt=ht,gt=i.document,yt=vt(gt)&&vt(gt.createElement),mt=function(t){return yt?gt.createElement(t):{}},bt=mt,Et=!ft&&!W((function(){return 7!=Object.defineProperty(bt("div"),"a",{get:function(){return 7}}).a})),Ot=i,Rt=ht,St=Ot.String,wt=Ot.TypeError,_t=function(t){if(Rt(t))return t;throw wt(St(t)+" is not an object")},It=Function.prototype.call,xt=It.bind?It.bind(It):function(){return It.apply(It,arguments)},jt=E({}.isPrototypeOf),Tt=M,kt=F,Pt=jt,Ct=K,At=i.Object,Ft=Ct?function(t){return"symbol"==typeof t}:function(t){var e=Tt("Symbol");return kt(e)&&Pt(e.prototype,At(t))},Dt=i.String,Lt=F,Nt=function(t){try{return Dt(t)}catch(t){return"Object"}},Mt=i.TypeError,Ht=function(t){if(Lt(t))return t;throw Mt(Nt(t)+" is not a function")},qt=xt,Ut=F,Vt=ht,zt=i.TypeError,Bt=xt,Gt=ht,Wt=Ft,Xt=function(t,e){var r=t[e];return null==r?void 0:Ht(r)},Jt=function(t,e){var r,n;if("string"===e&&Ut(r=t.toString)&&!Vt(n=qt(r,t)))return n;if(Ut(r=t.valueOf)&&!Vt(n=qt(r,t)))return n;if("string"!==e&&Ut(r=t.toString)&&!Vt(n=qt(r,t)))return n;throw zt("Can't convert object to primitive value")},$t=ut,Kt=i.TypeError,Yt=$t("toPrimitive"),Qt=function(t,e){if(!Gt(t)||Wt(t))return t;var r,n=Xt(t,Yt);if(n){if(void 0===e&&(e="default"),r=Bt(n,t,e),!Gt(r)||Wt(r))return r;throw Kt("Can't convert object to primitive value")}return void 0===e&&(e="number"),Jt(t,e)},Zt=Ft,te=function(t){var e=Qt(t,"string");return Zt(e)?e:e+""},ee=ft,re=Et,ne=_t,oe=te,ie=i.TypeError,ae=Object.defineProperty;pt.f=ee?ae:function(t,e,r){if(ne(t),e=oe(e),ne(r),re)try{return ae(t,e,r)}catch(t){}if("get"in r||"set"in r)throw ie("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var ue=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ce=pt,se=ue,le=ft?function(t,e,r){return ce.f(t,e,se(1,r))}:function(t,e,r){return t[e]=r,t},fe=F,pe=p,de=E(Function.toString);fe(pe.inspectSource)||(pe.inspectSource=function(t){return de(t)});var he,ve,ge,ye=pe.inspectSource,me=F,be=ye,Ee=i.WeakMap,Oe=me(Ee)&&/native code/.test(be(Ee)),Re=a.exports,Se=A,we=Re("keys"),_e=function(t){return we[t]||(we[t]=Se(t))},Ie={},xe=Oe,je=i,Te=E,ke=ht,Pe=le,Ce=j,Ae=p,Fe=_e,De=Ie,Le="Object already initialized",Ne=je.TypeError,Me=je.WeakMap;if(xe||Ae.state){var He=Ae.state||(Ae.state=new Me),qe=Te(He.get),Ue=Te(He.has),Ve=Te(He.set);he=function(t,e){if(Ue(He,t))throw new Ne(Le);return e.facade=t,Ve(He,t,e),e},ve=function(t){return qe(He,t)||{}},ge=function(t){return Ue(He,t)}}else{var ze=Fe("state");De[ze]=!0,he=function(t,e){if(Ce(t,ze))throw new Ne(Le);return e.facade=t,Pe(t,ze,e),e},ve=function(t){return Ce(t,ze)?t[ze]:{}},ge=function(t){return Ce(t,ze)}}var Be={set:he,get:ve,has:ge,enforce:function(t){return ge(t)?ve(t):he(t,{})},getterFor:function(t){return function(e){var r;if(!ke(e)||(r=ve(e)).type!==t)throw Ne("Incompatible receiver, "+t+" required");return r}}},Ge=ft,We=j,Xe=Function.prototype,Je=Ge&&Object.getOwnPropertyDescriptor,$e=We(Xe,"name"),Ke={EXISTS:$e,PROPER:$e&&"something"===function(){}.name,CONFIGURABLE:$e&&(!Ge||Ge&&Je(Xe,"name").configurable)},Ye=i,Qe=F,Ze=j,tr=le,er=s,rr=ye,nr=Ke.CONFIGURABLE,or=Be.get,ir=Be.enforce,ar=String(String).split("String");(lt.exports=function(t,e,r,n){var o,i=!!n&&!!n.unsafe,a=!!n&&!!n.enumerable,u=!!n&&!!n.noTargetGet,c=n&&void 0!==n.name?n.name:e;Qe(r)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Ze(r,"name")||nr&&r.name!==c)&&tr(r,"name",c),(o=ir(r)).source||(o.source=ar.join("string"==typeof c?c:""))),t!==Ye?(i?!u&&t[e]&&(a=!0):delete t[e],a?t[e]=r:tr(t,e,r)):a?t[e]=r:er(e,r)})(Function.prototype,"toString",(function(){return Qe(this)&&or(this).source||rr(this)}));var ur=E,cr=ur({}.toString),sr=ur("".slice),lr=function(t){return sr(cr(t),8,-1)},fr=i,pr=st,dr=F,hr=lr,vr=ut("toStringTag"),gr=fr.Object,yr="Arguments"==hr(function(){return arguments}()),mr=pr?hr:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=gr(t),vr))?r:yr?hr(e):"Object"==(n=hr(e))&&dr(e.callee)?"Arguments":n},br=mr,Er=st?{}.toString:function(){return"[object "+br(this)+"]"},Or=st,Rr=lt.exports,Sr=Er;Or||Rr(Object.prototype,"toString",Sr,{unsafe:!0});var wr={},_r={},Ir={}.propertyIsEnumerable,xr=Object.getOwnPropertyDescriptor,jr=xr&&!Ir.call({1:2},1);_r.f=jr?function(t){var e=xr(this,t);return!!e&&e.enumerable}:Ir;var Tr=E,kr=W,Pr=lr,Cr=i.Object,Ar=Tr("".split),Fr=kr((function(){return!Cr("z").propertyIsEnumerable(0)}))?function(t){return"String"==Pr(t)?Ar(t,""):Cr(t)}:Cr,Dr=R,Lr=function(t){return Fr(Dr(t))},Nr=ft,Mr=xt,Hr=_r,qr=ue,Ur=Lr,Vr=te,zr=j,Br=Et,Gr=Object.getOwnPropertyDescriptor;wr.f=Nr?Gr:function(t,e){if(t=Ur(t),e=Vr(e),Br)try{return Gr(t,e)}catch(t){}if(zr(t,e))return qr(!Mr(Hr.f,t,e),t[e])};var Wr={},Xr=Math.ceil,Jr=Math.floor,$r=function(t){var e=+t;return e!=e||0===e?0:(e>0?Jr:Xr)(e)},Kr=$r,Yr=Math.max,Qr=Math.min,Zr=$r,tn=Math.min,en=function(t){return t>0?tn(Zr(t),9007199254740991):0},rn=function(t){return en(t.length)},nn=Lr,on=function(t,e){var r=Kr(t);return r<0?Yr(r+e,0):Qr(r,e)},an=rn,un=function(t){return function(e,r,n){var o,i=nn(e),a=an(i),u=on(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},cn={includes:un(!0),indexOf:un(!1)},sn=j,ln=Lr,fn=cn.indexOf,pn=Ie,dn=E([].push),hn=function(t,e){var r,n=ln(t),o=0,i=[];for(r in n)!sn(pn,r)&&sn(n,r)&&dn(i,r);for(;e.length>o;)sn(n,r=e[o++])&&(~fn(i,r)||dn(i,r));return i},vn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gn=hn,yn=vn.concat("length","prototype");Wr.f=Object.getOwnPropertyNames||function(t){return gn(t,yn)};var mn={};mn.f=Object.getOwnPropertySymbols;var bn=M,En=Wr,On=mn,Rn=_t,Sn=E([].concat),wn=bn("Reflect","ownKeys")||function(t){var e=En.f(Rn(t)),r=On.f;return r?Sn(e,r(t)):e},_n=j,In=wn,xn=wr,jn=pt,Tn=W,kn=F,Pn=/#|\.prototype\./,Cn=function(t,e){var r=Fn[An(t)];return r==Ln||r!=Dn&&(kn(e)?Tn(e):!!e)},An=Cn.normalize=function(t){return String(t).replace(Pn,".").toLowerCase()},Fn=Cn.data={},Dn=Cn.NATIVE="N",Ln=Cn.POLYFILL="P",Nn=Cn,Mn=i,Hn=wr.f,qn=le,Un=lt.exports,Vn=s,zn=function(t,e,r){for(var n=In(e),o=jn.f,i=xn.f,a=0;a<n.length;a++){var u=n[a];_n(t,u)||r&&_n(r,u)||o(t,u,i(e,u))}},Bn=Nn,Gn=function(t,e){var r,n,o,i,a,u=t.target,c=t.global,s=t.stat;if(r=c?Mn:s?Mn[u]||Vn(u,{}):(Mn[u]||{}).prototype)for(n in e){if(i=e[n],o=t.noTargetGet?(a=Hn(r,n))&&a.value:r[n],!Bn(c?n:u+(s?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;zn(i,o)}(t.sham||o&&o.sham)&&qn(i,"sham",!0),Un(r,n,i,t)}},Wn=lr,Xn=Array.isArray||function(t){return"Array"==Wn(t)},Jn=te,$n=pt,Kn=ue,Yn=E,Qn=W,Zn=F,to=mr,eo=ye,ro=function(){},no=[],oo=M("Reflect","construct"),io=/^\s*(?:class|function)\b/,ao=Yn(io.exec),uo=!io.exec(ro),co=function(t){if(!Zn(t))return!1;try{return oo(ro,no,t),!0}catch(t){return!1}},so=function(t){if(!Zn(t))return!1;switch(to(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return uo||!!ao(io,eo(t))}catch(t){return!0}};so.sham=!0;var lo=!oo||Qn((function(){var t;return co(co.call)||!co(Object)||!co((function(){t=!0}))||t}))?so:co,fo=i,po=Xn,ho=lo,vo=ht,go=ut("species"),yo=fo.Array,mo=function(t){var e;return po(t)&&(e=t.constructor,(ho(e)&&(e===yo||po(e.prototype))||vo(e)&&null===(e=e[go]))&&(e=void 0)),void 0===e?yo:e},bo=W,Eo=G,Oo=ut("species"),Ro=Gn,So=i,wo=W,_o=Xn,Io=ht,xo=_,jo=rn,To=function(t,e,r){var n=Jn(e);n in t?$n.f(t,n,Kn(0,r)):t[n]=r},ko=function(t,e){return new(mo(t))(0===e?0:e)},Po=function(t){return Eo>=51||!bo((function(){var e=[];return(e.constructor={})[Oo]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Co=G,Ao=ut("isConcatSpreadable"),Fo=9007199254740991,Do="Maximum allowed index exceeded",Lo=So.TypeError,No=Co>=51||!wo((function(){var t=[];return t[Ao]=!1,t.concat()[0]!==t})),Mo=Po("concat"),Ho=function(t){if(!Io(t))return!1;var e=t[Ao];return void 0!==e?!!e:_o(t)};Ro({target:"Array",proto:!0,forced:!No||!Mo},{concat:function(t){var e,r,n,o,i,a=xo(this),u=ko(a,0),c=0;for(e=-1,n=arguments.length;e<n;e++)if(Ho(i=-1===e?a:arguments[e])){if(c+(o=jo(i))>Fo)throw Lo(Do);for(r=0;r<o;r++,c++)r in i&&To(u,c,i[r])}else{if(c>=Fo)throw Lo(Do);To(u,c++,i)}return u.length=c,u}});var qo=mr,Uo=i.String,Vo=function(t){if("Symbol"===qo(t))throw TypeError("Cannot convert a Symbol value to a string");return Uo(t)},zo=_t,Bo=function(){var t=zo(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Go=E,Wo=Ke.PROPER,Xo=lt.exports,Jo=_t,$o=jt,Ko=Vo,Yo=W,Qo=Bo,Zo="toString",ti=RegExp.prototype,ei=ti.toString,ri=Go(Qo),ni=Yo((function(){return"/a/b"!=ei.call({source:"a",flags:"b"})})),oi=Wo&&ei.name!=Zo;(ni||oi)&&Xo(RegExp.prototype,Zo,(function(){var t=Jo(this),e=Ko(t.source),r=t.flags;return"/"+e+"/"+Ko(void 0===r&&$o(ti,t)&&!("flags"in ti)?ri(t):r)}),{unsafe:!0});var ii,ai=W,ui=i.RegExp,ci=ai((function(){var t=ui("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),si=ci||ai((function(){return!ui("a","y").sticky})),li={BROKEN_CARET:ci||ai((function(){var t=ui("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:si,UNSUPPORTED_Y:ci},fi=hn,pi=vn,di=Object.keys||function(t){return fi(t,pi)},hi=pt,vi=_t,gi=Lr,yi=di,mi=ft?Object.defineProperties:function(t,e){vi(t);for(var r,n=gi(e),o=yi(e),i=o.length,a=0;i>a;)hi.f(t,r=o[a++],n[r]);return t},bi=M("document","documentElement"),Ei=_t,Oi=mi,Ri=vn,Si=Ie,wi=bi,_i=mt,Ii=_e("IE_PROTO"),xi=function(){},ji=function(t){return"<script>"+t+"</"+"script>"},Ti=function(t){t.write(ji("")),t.close();var e=t.parentWindow.Object;return t=null,e},ki=function(){try{ii=new ActiveXObject("htmlfile")}catch(t){}var t,e;ki="undefined"!=typeof document?document.domain&&ii?Ti(ii):((e=_i("iframe")).style.display="none",wi.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ji("document.F=Object")),t.close(),t.F):Ti(ii);for(var r=Ri.length;r--;)delete ki.prototype[Ri[r]];return ki()};Si[Ii]=!0;var Pi,Ci,Ai=Object.create||function(t,e){var r;return null!==t?(xi.prototype=Ei(t),r=new xi,xi.prototype=null,r[Ii]=t):r=ki(),void 0===e?r:Oi(r,e)},Fi=W,Di=i.RegExp,Li=Fi((function(){var t=Di(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Ni=W,Mi=i.RegExp,Hi=Ni((function(){var t=Mi("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),qi=xt,Ui=E,Vi=Vo,zi=Bo,Bi=li,Gi=a.exports,Wi=Ai,Xi=Be.get,Ji=Li,$i=Hi,Ki=Gi("native-string-replace",String.prototype.replace),Yi=RegExp.prototype.exec,Qi=Yi,Zi=Ui("".charAt),ta=Ui("".indexOf),ea=Ui("".replace),ra=Ui("".slice),na=(Ci=/b*/g,qi(Yi,Pi=/a/,"a"),qi(Yi,Ci,"a"),0!==Pi.lastIndex||0!==Ci.lastIndex),oa=Bi.BROKEN_CARET,ia=void 0!==/()??/.exec("")[1];(na||ia||oa||Ji||$i)&&(Qi=function(t){var e,r,n,o,i,a,u,c=this,s=Xi(c),l=Vi(t),f=s.raw;if(f)return f.lastIndex=c.lastIndex,e=qi(Qi,f,l),c.lastIndex=f.lastIndex,e;var p=s.groups,d=oa&&c.sticky,h=qi(zi,c),v=c.source,g=0,y=l;if(d&&(h=ea(h,"y",""),-1===ta(h,"g")&&(h+="g"),y=ra(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==Zi(l,c.lastIndex-1))&&(v="(?: "+v+")",y=" "+y,g++),r=new RegExp("^(?:"+v+")",h)),ia&&(r=new RegExp("^"+v+"$(?!\\s)",h)),na&&(n=c.lastIndex),o=qi(Yi,d?r:c,y),d?o?(o.input=ra(o.input,g),o[0]=ra(o[0],g),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:na&&o&&(c.lastIndex=c.global?o.index+o[0].length:n),ia&&o&&o.length>1&&qi(Ki,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&p)for(o.groups=a=Wi(null),i=0;i<p.length;i++)a[(u=p[i])[0]]=o[u[1]];return o});function aa(t){var e,r=null===(e=t)?"NULL":void 0===e?"UNDEFINED":"string"==typeof e||e instanceof String?"".concat(e):e.toString();if(!r)return 0;var n,o=0;if(0===r.length)return o;for(n=0;n<r.length;n++)o=(o<<5)-o+r.charCodeAt(n),o|=0;return o<0?"n"+Math.abs(o):"p"+o}function ua(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(navigator.sendBeacon&&"function"==typeof navigator.sendBeacon)navigator.sendBeacon(t,JSON.stringify(e));else{var r=new XMLHttpRequest;r.open("POST",t),r.setRequestHeader("content-type","application/json"),r.withCredentials=!0,r.send(JSON.stringify(e))}}catch(t){console.log("post err")}}Gn({target:"RegExp",proto:!0,forced:/./.exec!==Qi},{exec:Qi});var ca=function(){function e(r){var n=r.dsn,o=r.key,i=r.Vue;t(this,e),this.userId="",this.dsn=n,this.key=o,this.Vue=i,this._ERROR_STORE=[],this._DEVICE_INFO={screen_info:{availHeight:screen.availHeight||"",availWidth:screen.availWidth||"",height:screen.height,width:screen.width},language:navigator.language,userAgent:navigator.userAgent.toLocaleLowerCase()},this.initialize()}return r(e,[{key:"initialize",value:function(){this.polyfillRequestIdleCallback(),this.generateUserId(),this.proxyErrorStore(),this.collectCatchErrorFn()}},{key:"polyfillRequestIdleCallback",value:function(){window.requestIdleCallback=window.requestIdleCallback||function(t){return setTimeout((function(){t()}),1)}}},{key:"proxyErrorStore",value:function(){var t=Array.prototype,e=Object.create(t);["push","clear"].forEach((function(r){e[r]=function(){"push"===r?t[r].apply(this,arguments):"clear"===r&&(this.length=0)}})),this._ERROR_STORE.__proto__=e}},{key:"collectCatchErrorFn",value:function(){this.unhandledrejectionHandle(),this.listenErrorHandle(),this.vueErrorHandle(),this.overwriteXHR()}},{key:"generateUserId",value:function(){localStorage.getItem("___monitor-js-uid___")?this.userId=localStorage.getItem("___monitor-js-uid___"):(this.userId=aa(String((new Date).getTime())+navigator.userAgent),localStorage.setItem("___monitor-js-uid___",this.userId))}},{key:"manualPost",value:function(){var t=this;t._ERROR_STORE.length&&(ua(t.dsn+"/post",t._ERROR_STORE),t._ERROR_STORE.clear())}},{key:"clearErrorStore",value:function(){this._ERROR_STORE.clear()}},{key:"reportError",value:function(t){var e=this;window.requestIdleCallback((function(){ua(e.dsn+"/report-err",t)}))}},{key:"generateReportData",value:function(t){var e=t.type,r=t.errorInfo;if(e||r)return{type:e,errorInfo:r,url:location.href,userId:this.userId,key:this.key,deviceInfo:this._DEVICE_INFO,timestamp:(new Date).getTime(),errorId:aa(e+JSON.stringify(r)+location.href)}}},{key:"unhandledrejectionHandle",value:function(){var t=this;window.addEventListener("unhandledrejection",(function(e){console.error("promise异常::",e.reason);var r=t.generateReportData({type:"unhandledrejection",errorInfo:{error:e.reason}});return t.reportError(r),t._ERROR_STORE.push(r),!0}))}},{key:"listenErrorHandle",value:function(){var t=this;window.addEventListener("error",(function(e){if(console.error("异常::",e),e instanceof ErrorEvent){var r=t.generateReportData({type:"script_error",errorInfo:{colno:e.colno,lineno:e.lineno,message:e.message,filename:e.filename}});t.reportError(r),t._ERROR_STORE.push(r)}else if(e.target.localName){var n=t.generateReportData({type:"resource_error",errorInfo:{error:e.target.outerHTML}});t.reportError(n),t._ERROR_STORE.push(n)}}),!0)}},{key:"vueErrorHandle",value:function(){var t=this;this.Vue&&this.Vue.config&&(this.Vue.config.errorHandler=function(e,r,n){console.error("Vue_err::",e);var o="";r.$route&&(o=r.$route.path);var i=t.generateReportData({type:"vue_error",errorInfo:{vue_stack_err:e.stack,vue_info:"".concat(e.toString(),"-----\x3e").concat(n),route:o}});t.reportError(i),t._ERROR_STORE.push(i)})}},{key:"overwriteXHR",value:function(){if(!(!1 in window)){var t=this,e=window.XMLHttpRequest.prototype,r=e.open;e.open=function(){this._httpInfo={method:arguments[0],startTime:Date.now()},r.apply(this,arguments)};var n=e.send,o=this.replaceOriginalFn(n,"loadend",(function(){if(4===this.readyState&&this.status>=400){console.log("接口响应粗错了",this);var e=/'application\/json'/.test(this.getResponseHeader("content-type")),r=t.generateReportData({type:"request_error",errorInfo:{status:this.status,response:e?JSON.parse(this.response):this.response,responseURL:this.responseURL,requestMethod:this._httpInfo.method,spendTime:Date.now()-this._httpInfo.startTime}});t.reportError(r),t._ERROR_STORE.push(r)}}));e.send=o}}},{key:"replaceOriginalFn",value:function(t,e,r){return function(){this.addEventListener(e,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];t.apply(this,o)}}}]),e}();return function(){function e(){t(this,e),this.monitorInstance=null}return r(e,null,[{key:"init",value:function(t){var e=t.dsn,r=t.key,n=t.Vue;e&&r&&(this.monitorInstance=new ca({dsn:e,key:r,Vue:n}))}},{key:"instance",value:function(){return this.monitorInstance}},{key:"errorStore",value:function(){return this.monitorInstance._ERROR_STORE}},{key:"manualPost",value:function(){this.monitorInstance.manualPost()}},{key:"clearErrorStore",value:function(){this.monitorInstance.clearErrorStore()}}]),e}()}();
