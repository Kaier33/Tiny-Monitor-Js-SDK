var MonitJsSdk=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=function(e){return e&&e.Math==Math&&e},i=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a={exports:{}},u=i,c=Object.defineProperty,s=function(e,t){try{c(u,e,{value:t,configurable:!0,writable:!0})}catch(r){u[e]=t}return t},l=s,f="__core-js_shared__",p=i[f]||l(f,{}),h=p;(a.exports=function(e,t){return h[e]||(h[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.1",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var d,g,v=Function.prototype,y=v.bind,m=v.call,b=y&&y.bind(m),E=y?function(e){return e&&b(m,e)}:function(e){return e&&function(){return m.apply(e,arguments)}},O=i.TypeError,R=function(e){if(null==e)throw O("Can't call method on "+e);return e},w=R,S=i.Object,_=function(e){return S(w(e))},I=_,T=E({}.hasOwnProperty),x=Object.hasOwn||function(e,t){return T(I(e),t)},j=E,k=0,A=Math.random(),P=j(1..toString),C=function(e){return"Symbol("+(void 0===e?"":e)+")_"+P(++k+A,36)},L=function(e){return"function"==typeof e},M=i,B=L,F=function(e){return B(e)?e:void 0},D=function(e,t){return arguments.length<2?F(M[e]):M[e]&&M[e][t]},H=i,N=D("navigator","userAgent")||"",U=H.process,q=H.Deno,V=U&&U.versions||q&&q.version,z=V&&V.v8;z&&(g=(d=z.split("."))[0]>0&&d[0]<4?1:+(d[0]+d[1])),!g&&N&&(!(d=N.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=N.match(/Chrome\/(\d+)/))&&(g=+d[1]);var W=g,G=function(e){try{return!!e()}catch(e){return!0}},X=W,J=G,$=!!Object.getOwnPropertySymbols&&!J((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&X&&X<41})),K=$&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Y=i,Q=a.exports,Z=x,ee=C,te=$,re=K,ne=Q("wks"),oe=Y.Symbol,ie=oe&&oe.for,ae=re?oe:oe&&oe.withoutSetter||ee,ue=function(e){if(!Z(ne,e)||!te&&"string"!=typeof ne[e]){var t="Symbol."+e;te&&Z(oe,e)?ne[e]=oe[e]:ne[e]=re&&ie?ie(t):ae(t)}return ne[e]},ce={};ce[ue("toStringTag")]="z";var se="[object z]"===String(ce),le={exports:{}},fe=!G((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pe={},he=L,de=function(e){return"object"==typeof e?null!==e:he(e)},ge=de,ve=i.document,ye=ge(ve)&&ge(ve.createElement),me=function(e){return ye?ve.createElement(e):{}},be=me,Ee=!fe&&!G((function(){return 7!=Object.defineProperty(be("div"),"a",{get:function(){return 7}}).a})),Oe=i,Re=de,we=Oe.String,Se=Oe.TypeError,_e=function(e){if(Re(e))return e;throw Se(we(e)+" is not an object")},Ie=Function.prototype.call,Te=Ie.bind?Ie.bind(Ie):function(){return Ie.apply(Ie,arguments)},xe=E({}.isPrototypeOf),je=D,ke=L,Ae=xe,Pe=K,Ce=i.Object,Le=Pe?function(e){return"symbol"==typeof e}:function(e){var t=je("Symbol");return ke(t)&&Ae(t.prototype,Ce(e))},Me=i.String,Be=L,Fe=function(e){try{return Me(e)}catch(e){return"Object"}},De=i.TypeError,He=function(e){if(Be(e))return e;throw De(Fe(e)+" is not a function")},Ne=Te,Ue=L,qe=de,Ve=i.TypeError,ze=Te,We=de,Ge=Le,Xe=function(e,t){var r=e[t];return null==r?void 0:He(r)},Je=function(e,t){var r,n;if("string"===t&&Ue(r=e.toString)&&!qe(n=Ne(r,e)))return n;if(Ue(r=e.valueOf)&&!qe(n=Ne(r,e)))return n;if("string"!==t&&Ue(r=e.toString)&&!qe(n=Ne(r,e)))return n;throw Ve("Can't convert object to primitive value")},$e=ue,Ke=i.TypeError,Ye=$e("toPrimitive"),Qe=function(e,t){if(!We(e)||Ge(e))return e;var r,n=Xe(e,Ye);if(n){if(void 0===t&&(t="default"),r=ze(n,e,t),!We(r)||Ge(r))return r;throw Ke("Can't convert object to primitive value")}return void 0===t&&(t="number"),Je(e,t)},Ze=Le,et=function(e){var t=Qe(e,"string");return Ze(t)?t:t+""},tt=fe,rt=Ee,nt=_e,ot=et,it=i.TypeError,at=Object.defineProperty;pe.f=tt?at:function(e,t,r){if(nt(e),t=ot(t),nt(r),rt)try{return at(e,t,r)}catch(e){}if("get"in r||"set"in r)throw it("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var ut=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},ct=pe,st=ut,lt=fe?function(e,t,r){return ct.f(e,t,st(1,r))}:function(e,t,r){return e[t]=r,e},ft=L,pt=p,ht=E(Function.toString);ft(pt.inspectSource)||(pt.inspectSource=function(e){return ht(e)});var dt,gt,vt,yt=pt.inspectSource,mt=L,bt=yt,Et=i.WeakMap,Ot=mt(Et)&&/native code/.test(bt(Et)),Rt=a.exports,wt=C,St=Rt("keys"),_t=function(e){return St[e]||(St[e]=wt(e))},It={},Tt=Ot,xt=i,jt=E,kt=de,At=lt,Pt=x,Ct=p,Lt=_t,Mt=It,Bt="Object already initialized",Ft=xt.TypeError,Dt=xt.WeakMap;if(Tt||Ct.state){var Ht=Ct.state||(Ct.state=new Dt),Nt=jt(Ht.get),Ut=jt(Ht.has),qt=jt(Ht.set);dt=function(e,t){if(Ut(Ht,e))throw new Ft(Bt);return t.facade=e,qt(Ht,e,t),t},gt=function(e){return Nt(Ht,e)||{}},vt=function(e){return Ut(Ht,e)}}else{var Vt=Lt("state");Mt[Vt]=!0,dt=function(e,t){if(Pt(e,Vt))throw new Ft(Bt);return t.facade=e,At(e,Vt,t),t},gt=function(e){return Pt(e,Vt)?e[Vt]:{}},vt=function(e){return Pt(e,Vt)}}var zt={set:dt,get:gt,has:vt,enforce:function(e){return vt(e)?gt(e):dt(e,{})},getterFor:function(e){return function(t){var r;if(!kt(t)||(r=gt(t)).type!==e)throw Ft("Incompatible receiver, "+e+" required");return r}}},Wt=fe,Gt=x,Xt=Function.prototype,Jt=Wt&&Object.getOwnPropertyDescriptor,$t=Gt(Xt,"name"),Kt={EXISTS:$t,PROPER:$t&&"something"===function(){}.name,CONFIGURABLE:$t&&(!Wt||Wt&&Jt(Xt,"name").configurable)},Yt=i,Qt=L,Zt=x,er=lt,tr=s,rr=yt,nr=Kt.CONFIGURABLE,or=zt.get,ir=zt.enforce,ar=String(String).split("String");(le.exports=function(e,t,r,n){var o,i=!!n&&!!n.unsafe,a=!!n&&!!n.enumerable,u=!!n&&!!n.noTargetGet,c=n&&void 0!==n.name?n.name:t;Qt(r)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Zt(r,"name")||nr&&r.name!==c)&&er(r,"name",c),(o=ir(r)).source||(o.source=ar.join("string"==typeof c?c:""))),e!==Yt?(i?!u&&e[t]&&(a=!0):delete e[t],a?e[t]=r:er(e,t,r)):a?e[t]=r:tr(t,r)})(Function.prototype,"toString",(function(){return Qt(this)&&or(this).source||rr(this)}));var ur=E,cr=ur({}.toString),sr=ur("".slice),lr=function(e){return sr(cr(e),8,-1)},fr=i,pr=se,hr=L,dr=lr,gr=ue("toStringTag"),vr=fr.Object,yr="Arguments"==dr(function(){return arguments}()),mr=pr?dr:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=vr(e),gr))?r:yr?dr(t):"Object"==(n=dr(t))&&hr(t.callee)?"Arguments":n},br=mr,Er=se?{}.toString:function(){return"[object "+br(this)+"]"},Or=se,Rr=le.exports,wr=Er;Or||Rr(Object.prototype,"toString",wr,{unsafe:!0});var Sr={},_r={},Ir={}.propertyIsEnumerable,Tr=Object.getOwnPropertyDescriptor,xr=Tr&&!Ir.call({1:2},1);_r.f=xr?function(e){var t=Tr(this,e);return!!t&&t.enumerable}:Ir;var jr=E,kr=G,Ar=lr,Pr=i.Object,Cr=jr("".split),Lr=kr((function(){return!Pr("z").propertyIsEnumerable(0)}))?function(e){return"String"==Ar(e)?Cr(e,""):Pr(e)}:Pr,Mr=R,Br=function(e){return Lr(Mr(e))},Fr=fe,Dr=Te,Hr=_r,Nr=ut,Ur=Br,qr=et,Vr=x,zr=Ee,Wr=Object.getOwnPropertyDescriptor;Sr.f=Fr?Wr:function(e,t){if(e=Ur(e),t=qr(t),zr)try{return Wr(e,t)}catch(e){}if(Vr(e,t))return Nr(!Dr(Hr.f,e,t),e[t])};var Gr={},Xr=Math.ceil,Jr=Math.floor,$r=function(e){var t=+e;return t!=t||0===t?0:(t>0?Jr:Xr)(t)},Kr=$r,Yr=Math.max,Qr=Math.min,Zr=function(e,t){var r=Kr(e);return r<0?Yr(r+t,0):Qr(r,t)},en=$r,tn=Math.min,rn=function(e){return e>0?tn(en(e),9007199254740991):0},nn=function(e){return rn(e.length)},on=Br,an=Zr,un=nn,cn=function(e){return function(t,r,n){var o,i=on(t),a=un(i),u=an(n,a);if(e&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((e||u in i)&&i[u]===r)return e||u||0;return!e&&-1}},sn={includes:cn(!0),indexOf:cn(!1)},ln=x,fn=Br,pn=sn.indexOf,hn=It,dn=E([].push),gn=function(e,t){var r,n=fn(e),o=0,i=[];for(r in n)!ln(hn,r)&&ln(n,r)&&dn(i,r);for(;t.length>o;)ln(n,r=t[o++])&&(~pn(i,r)||dn(i,r));return i},vn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],yn=gn,mn=vn.concat("length","prototype");Gr.f=Object.getOwnPropertyNames||function(e){return yn(e,mn)};var bn={};bn.f=Object.getOwnPropertySymbols;var En,On=D,Rn=Gr,wn=bn,Sn=_e,_n=E([].concat),In=On("Reflect","ownKeys")||function(e){var t=Rn.f(Sn(e)),r=wn.f;return r?_n(t,r(e)):t},Tn=x,xn=In,jn=Sr,kn=pe,An=G,Pn=L,Cn=/#|\.prototype\./,Ln=function(e,t){var r=Bn[Mn(e)];return r==Dn||r!=Fn&&(Pn(t)?An(t):!!t)},Mn=Ln.normalize=function(e){return String(e).replace(Cn,".").toLowerCase()},Bn=Ln.data={},Fn=Ln.NATIVE="N",Dn=Ln.POLYFILL="P",Hn=Ln,Nn=i,Un=Sr.f,qn=lt,Vn=le.exports,zn=s,Wn=function(e,t,r){for(var n=xn(t),o=kn.f,i=jn.f,a=0;a<n.length;a++){var u=n[a];Tn(e,u)||r&&Tn(r,u)||o(e,u,i(t,u))}},Gn=Hn,Xn=function(e,t){var r,n,o,i,a,u=e.target,c=e.global,s=e.stat;if(r=c?Nn:s?Nn[u]||zn(u,{}):(Nn[u]||{}).prototype)for(n in t){if(i=t[n],o=e.noTargetGet?(a=Un(r,n))&&a.value:r[n],!Gn(c?n:u+(s?".":"#")+n,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;Wn(i,o)}(e.sham||o&&o.sham)&&qn(i,"sham",!0),Vn(r,n,i,e)}},Jn=gn,$n=vn,Kn=Object.keys||function(e){return Jn(e,$n)},Yn=pe,Qn=_e,Zn=Br,eo=Kn,to=fe?Object.defineProperties:function(e,t){Qn(e);for(var r,n=Zn(t),o=eo(t),i=o.length,a=0;i>a;)Yn.f(e,r=o[a++],n[r]);return e},ro=D("document","documentElement"),no=_e,oo=to,io=vn,ao=It,uo=ro,co=me,so=_t("IE_PROTO"),lo=function(){},fo=function(e){return"<script>"+e+"</"+"script>"},po=function(e){e.write(fo("")),e.close();var t=e.parentWindow.Object;return e=null,t},ho=function(){try{En=new ActiveXObject("htmlfile")}catch(e){}var e,t;ho="undefined"!=typeof document?document.domain&&En?po(En):((t=co("iframe")).style.display="none",uo.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(fo("document.F=Object")),e.close(),e.F):po(En);for(var r=io.length;r--;)delete ho.prototype[io[r]];return ho()};ao[so]=!0;var go=Object.create||function(e,t){var r;return null!==e?(lo.prototype=no(e),r=new lo,lo.prototype=null,r[so]=e):r=ho(),void 0===t?r:oo(r,t)},vo=go,yo=pe,mo=ue("unscopables"),bo=Array.prototype;null==bo[mo]&&yo.f(bo,mo,{configurable:!0,value:vo(null)});var Eo=sn.includes,Oo=function(e){bo[mo][e]=!0};Xn({target:"Array",proto:!0},{includes:function(e){return Eo(this,e,arguments.length>1?arguments[1]:void 0)}}),Oo("includes");var Ro=de,wo=lr,So=ue("match"),_o=function(e){var t;return Ro(e)&&(void 0!==(t=e[So])?!!t:"RegExp"==wo(e))},Io=i.TypeError,To=mr,xo=i.String,jo=function(e){if("Symbol"===To(e))throw TypeError("Cannot convert a Symbol value to a string");return xo(e)},ko=ue("match"),Ao=Xn,Po=function(e){if(_o(e))throw Io("The method doesn't accept regular expressions");return e},Co=R,Lo=jo,Mo=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[ko]=!1,"/./"[e](t)}catch(e){}}return!1},Bo=E("".indexOf);Ao({target:"String",proto:!0,forced:!Mo("includes")},{includes:function(e){return!!~Bo(Lo(Co(this)),Lo(Po(e)),arguments.length>1?arguments[1]:void 0)}});var Fo=lr,Do=Array.isArray||function(e){return"Array"==Fo(e)},Ho=et,No=pe,Uo=ut,qo=function(e,t,r){var n=Ho(t);n in e?No.f(e,n,Uo(0,r)):e[n]=r},Vo=E,zo=G,Wo=L,Go=mr,Xo=yt,Jo=function(){},$o=[],Ko=D("Reflect","construct"),Yo=/^\s*(?:class|function)\b/,Qo=Vo(Yo.exec),Zo=!Yo.exec(Jo),ei=function(e){if(!Wo(e))return!1;try{return Ko(Jo,$o,e),!0}catch(e){return!1}},ti=function(e){if(!Wo(e))return!1;switch(Go(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Zo||!!Qo(Yo,Xo(e))}catch(e){return!0}};ti.sham=!0;var ri=!Ko||zo((function(){var e;return ei(ei.call)||!ei(Object)||!ei((function(){e=!0}))||e}))?ti:ei,ni=i,oi=Do,ii=ri,ai=de,ui=ue("species"),ci=ni.Array,si=function(e){var t;return oi(e)&&(t=e.constructor,(ii(t)&&(t===ci||oi(t.prototype))||ai(t)&&null===(t=t[ui]))&&(t=void 0)),void 0===t?ci:t},li=function(e,t){return new(si(e))(0===t?0:t)},fi=G,pi=W,hi=ue("species"),di=function(e){return pi>=51||!fi((function(){var t=[];return(t.constructor={})[hi]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},gi=Xn,vi=i,yi=G,mi=Do,bi=de,Ei=_,Oi=nn,Ri=qo,wi=li,Si=di,_i=W,Ii=ue("isConcatSpreadable"),Ti=9007199254740991,xi="Maximum allowed index exceeded",ji=vi.TypeError,ki=_i>=51||!yi((function(){var e=[];return e[Ii]=!1,e.concat()[0]!==e})),Ai=Si("concat"),Pi=function(e){if(!bi(e))return!1;var t=e[Ii];return void 0!==t?!!t:mi(e)};gi({target:"Array",proto:!0,forced:!ki||!Ai},{concat:function(e){var t,r,n,o,i,a=Ei(this),u=wi(a,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(Pi(i=-1===t?a:arguments[t])){if(c+(o=Oi(i))>Ti)throw ji(xi);for(r=0;r<o;r++,c++)r in i&&Ri(u,c,i[r])}else{if(c>=Ti)throw ji(xi);Ri(u,c++,i)}return u.length=c,u}});var Ci=_e,Li=function(){var e=Ci(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Mi=E,Bi=Kt.PROPER,Fi=le.exports,Di=_e,Hi=xe,Ni=jo,Ui=G,qi=Li,Vi="toString",zi=RegExp.prototype,Wi=zi.toString,Gi=Mi(qi),Xi=Ui((function(){return"/a/b"!=Wi.call({source:"a",flags:"b"})})),Ji=Bi&&Wi.name!=Vi;(Xi||Ji)&&Fi(RegExp.prototype,Vi,(function(){var e=Di(this),t=Ni(e.source),r=e.flags;return"/"+t+"/"+Ni(void 0===r&&Hi(zi,e)&&!("flags"in zi)?Gi(e):r)}),{unsafe:!0});var $i,Ki,Yi=G,Qi=i.RegExp,Zi=Yi((function(){var e=Qi("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),ea=Zi||Yi((function(){return!Qi("a","y").sticky})),ta={BROKEN_CARET:Zi||Yi((function(){var e=Qi("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:ea,UNSUPPORTED_Y:Zi},ra=G,na=i.RegExp,oa=ra((function(){var e=na(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),ia=G,aa=i.RegExp,ua=ia((function(){var e=aa("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),ca=Te,sa=E,la=jo,fa=Li,pa=ta,ha=a.exports,da=go,ga=zt.get,va=oa,ya=ua,ma=ha("native-string-replace",String.prototype.replace),ba=RegExp.prototype.exec,Ea=ba,Oa=sa("".charAt),Ra=sa("".indexOf),wa=sa("".replace),Sa=sa("".slice),_a=(Ki=/b*/g,ca(ba,$i=/a/,"a"),ca(ba,Ki,"a"),0!==$i.lastIndex||0!==Ki.lastIndex),Ia=pa.BROKEN_CARET,Ta=void 0!==/()??/.exec("")[1];(_a||Ta||Ia||va||ya)&&(Ea=function(e){var t,r,n,o,i,a,u,c=this,s=ga(c),l=la(e),f=s.raw;if(f)return f.lastIndex=c.lastIndex,t=ca(Ea,f,l),c.lastIndex=f.lastIndex,t;var p=s.groups,h=Ia&&c.sticky,d=ca(fa,c),g=c.source,v=0,y=l;if(h&&(d=wa(d,"y",""),-1===Ra(d,"g")&&(d+="g"),y=Sa(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==Oa(l,c.lastIndex-1))&&(g="(?: "+g+")",y=" "+y,v++),r=new RegExp("^(?:"+g+")",d)),Ta&&(r=new RegExp("^"+g+"$(?!\\s)",d)),_a&&(n=c.lastIndex),o=ca(ba,h?r:c,y),h?o?(o.input=Sa(o.input,v),o[0]=Sa(o[0],v),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:_a&&o&&(c.lastIndex=c.global?o.index+o[0].length:n),Ta&&o&&o.length>1&&ca(ma,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&p)for(o.groups=a=da(null),i=0;i<p.length;i++)a[(u=p[i])[0]]=o[u[1]];return o});Xn({target:"RegExp",proto:!0,forced:/./.exec!==Ea},{exec:Ea});var xa=Xn,ja=i,ka=Zr,Aa=$r,Pa=nn,Ca=_,La=li,Ma=qo,Ba=di("splice"),Fa=ja.TypeError,Da=Math.max,Ha=Math.min,Na=9007199254740991,Ua="Maximum allowed length exceeded";xa({target:"Array",proto:!0,forced:!Ba},{splice:function(e,t){var r,n,o,i,a,u,c=Ca(this),s=Pa(c),l=ka(e,s),f=arguments.length;if(0===f?r=n=0:1===f?(r=0,n=s-l):(r=f-2,n=Ha(Da(Aa(t),0),s-l)),s+r-n>Na)throw Fa(Ua);for(o=La(c,n),i=0;i<n;i++)(a=l+i)in c&&Ma(o,i,c[a]);if(o.length=n,r<n){for(i=l;i<s-n;i++)u=i+r,(a=i+n)in c?c[u]=c[a]:delete c[u];for(i=s;i>s-n+r;i--)delete c[i-1]}else if(r>n)for(i=s-n;i>l;i--)u=i+r-1,(a=i+n-1)in c?c[u]=c[a]:delete c[u];for(i=0;i<r;i++)c[i+l]=arguments[i+2];return c.length=s-n+r,o}});var qa=E([].slice),Va=Xn,za=i,Wa=Do,Ga=ri,Xa=de,Ja=Zr,$a=nn,Ka=Br,Ya=qo,Qa=ue,Za=qa,eu=di("slice"),tu=Qa("species"),ru=za.Array,nu=Math.max;function ou(e){var t,r=null===(t=e)?"NULL":void 0===t?"UNDEFINED":"string"==typeof t||t instanceof String?"".concat(t):t.toString();if(!r)return 0;var n,o=0;if(0===r.length)return o;for(n=0;n<r.length;n++)o=(o<<5)-o+r.charCodeAt(n),o|=0;return o<0?"n"+Math.abs(o):"p"+o}function iu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(navigator.sendBeacon&&"function"==typeof navigator.sendBeacon)navigator.sendBeacon(e,JSON.stringify(t));else{var r=new XMLHttpRequest;r.open("POST",e),r.setRequestHeader("content-type","application/json"),r.withCredentials=!0,r.send(JSON.stringify(t))}}catch(e){console.log("post err")}}Va({target:"Array",proto:!0,forced:!eu},{slice:function(e,t){var r,n,o,i=Ka(this),a=$a(i),u=Ja(e,a),c=Ja(void 0===t?a:t,a);if(Wa(i)&&(r=i.constructor,(Ga(r)&&(r===ru||Wa(r.prototype))||Xa(r)&&null===(r=r[tu]))&&(r=void 0),r===ru||void 0===r))return Za(i,u,c);for(n=new(void 0===r?ru:r)(nu(c-u,0)),o=0;u<c;u++,o++)u in i&&Ya(n,o,i[u]);return n.length=o,n}});var au="vue_error",uu="unhandledrejection",cu="script_error",su="resource_error",lu="request_error",fu=function(){function t(r){var n=r.dsn,o=r.key,i=r.Vue,a=r.ignoreErrType;r.maxBreadcrumb,e(this,t),this.userId="",this.dsn=n,this.key=o,this.Vue=i,this.maxBreadcrumb=50,this.breadcrumbs=[],this.ignoreErrType=a||null,this._ERROR_STORE=[],this._DEVICE_INFO={screen_info:{availHeight:screen.availHeight||"",availWidth:screen.availWidth||"",height:screen.height,width:screen.width},language:navigator.language,userAgent:navigator.userAgent.toLocaleLowerCase()},this.initialize()}return r(t,[{key:"initialize",value:function(){this.polyfillRequestIdleCallback(),this.generateUserId(),this.proxyErrorStore(),this.collectCatchErrorFn(),this.collectBehaviorTrack()}},{key:"polyfillRequestIdleCallback",value:function(){window.requestIdleCallback=window.requestIdleCallback||function(e){return setTimeout((function(){e()}),1)}}},{key:"proxyErrorStore",value:function(){var e=Array.prototype,t=Object.create(e);["push","clear"].forEach((function(r){t[r]=function(){"push"===r?e[r].apply(this,arguments):"clear"===r&&(this.length=0)}})),this._ERROR_STORE.__proto__=t}},{key:"collectCatchErrorFn",value:function(){this.listenErrorHandle(),!this.shouldBeIgnoreErrType(uu)&&this.unhandledrejectionHandle(),!this.shouldBeIgnoreErrType(au)&&this.vueErrorHandle(),!this.shouldBeIgnoreErrType(lu)&&this.overwriteXHR()}},{key:"shouldBeIgnoreErrType",value:function(e){var t=function(e,t){return Object.prototype.toString.call(e).slice(8,-1)===t}(this.ignoreErrType,"Array");return!!t&&this.ignoreErrType.includes(e)}},{key:"generateUserId",value:function(){localStorage.getItem("___monitor-js-uid___")?this.userId=localStorage.getItem("___monitor-js-uid___"):(this.userId=ou(String((new Date).getTime())+navigator.userAgent),localStorage.setItem("___monitor-js-uid___",this.userId))}},{key:"manualPost",value:function(){var e=this;e._ERROR_STORE.length&&(iu(e.dsn+"/post",e._ERROR_STORE),e._ERROR_STORE.clear())}},{key:"clearErrorStore",value:function(){this._ERROR_STORE.clear()}},{key:"reportError",value:function(e){var t=this;this.dsn&&this.key&&window.requestIdleCallback((function(){iu(t.dsn+"/report-err",e)}))}},{key:"generateReportData",value:function(e){var t=e.type,r=e.errorInfo;if(t||r)return{error_info:{type:t,errorInfo:r,url:location.href,userId:this.userId,key:this.key,deviceInfo:this._DEVICE_INFO,timestamp:(new Date).getTime(),errorId:ou(t+JSON.stringify(r)+location.href)},breadcrumb_trail:this.breadcrumbs}}},{key:"unhandledrejectionHandle",value:function(){var e=this;window.addEventListener("unhandledrejection",(function(t){console.error("promise异常::",t.reason);var r=e.generateReportData({type:"unhandledrejection",errorInfo:{error:t.reason}});return e.reportError(r),e._ERROR_STORE.push(r),!0}))}},{key:"listenErrorHandle",value:function(){var e=this;window.addEventListener("error",(function(t){if(console.error("异常::",t),t instanceof ErrorEvent){if(e.shouldBeIgnoreErrType(cu))return;var r=e.generateReportData({type:cu,errorInfo:{colno:t.colno,lineno:t.lineno,message:t.message,filename:t.filename}});e.reportError(r),e._ERROR_STORE.push(r)}else if(t.target.localName){if(e.shouldBeIgnoreErrType(su))return;var n=e.generateReportData({type:su,errorInfo:{error:t.target.outerHTML}});e.reportError(n),e._ERROR_STORE.push(n)}}),!0)}},{key:"vueErrorHandle",value:function(){var e=this;this.Vue&&this.Vue.config&&(this.Vue.config.errorHandler=function(t,r,n){console.error("Vue_err::",t);var o="";r.$route&&(o=r.$route.path);var i=e.generateReportData({type:au,errorInfo:{vue_stack_err:t.stack,vue_info:"".concat(t.toString(),"-----\x3e").concat(n),route:o}});e.reportError(i),e._ERROR_STORE.push(i)})}},{key:"overwriteXHR",value:function(){if(!(!1 in window)){var e=this,t=window.XMLHttpRequest.prototype,r=t.open;t.open=function(){this._httpInfo={method:arguments[0],startTime:Date.now()},r.apply(this,arguments)};var n=t.send,o=this.replaceOriginalFn(n,"loadend",(function(){if(4===this.readyState&&this.status>=400){console.log("接口响应粗错了",this);var t=/'application\/json'/.test(this.getResponseHeader("content-type")),r=e.generateReportData({type:lu,errorInfo:{status:this.status,response:t?JSON.parse(this.response):this.response,responseURL:this.responseURL,requestMethod:this._httpInfo.method,spendTime:Date.now()-this._httpInfo.startTime}});e.reportError(r),e._ERROR_STORE.push(r)}}));t.send=o}}},{key:"replaceOriginalFn",value:function(e,t,r){return function(){this.addEventListener(t,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];e.apply(this,o)}}},{key:"collectBehaviorTrack",value:function(){this.onListenClick()}},{key:"onListenClick",value:function(){var e=this;window.addEventListener("mousedown",(function(t){var r=t.target,n=r.getBoundingClientRect(),o=n.top,i=n.left;e.pushToBreadcrumbs({top:o,left:i,type:"behavior",subType:"click",target:r.tagName,outerHTML:r.outerHTML,innerHTML:r.innerHTML,width:r.offsetWidth,height:r.offsetHeight,pageURL:location.href})}))}},{key:"pushToBreadcrumbs",value:function(e){this.breadcrumbs.length>this.maxBreadcrumb&&this.breadcrumbs.splice(0,this.maxBreadcrumb>>1),this.breadcrumbs.push(e)}}]),t}();return function(){function t(){e(this,t),this.monitorInstance=null}return r(t,null,[{key:"init",value:function(e){var t=e.dsn,r=e.key,n=e.Vue,o=e.ignoreErrType;t&&r&&(this.monitorInstance=new fu({dsn:t,key:r,Vue:n,ignoreErrType:o}))}},{key:"instance",value:function(){return this.monitorInstance}},{key:"errorStore",value:function(){return this.monitorInstance._ERROR_STORE}},{key:"manualPost",value:function(){this.monitorInstance.manualPost()}},{key:"clearErrorStore",value:function(){this.monitorInstance.clearErrorStore()}}]),t}()}();
